"use strict";module.exports=function(e,t,p){var n={bump:{type:"patch"},dest:".",git:{branch:"master",options:{args:" --tag"},remote:{name:"origin"}},name:"publish",src:["bower.json","package.json"],tasks:void 0};return function(i){i=p.merge({},n,i);var s=i.name+":push",r=i.name+":npm",a=(i.name+":prep",i.name),o=i.name+":tag";return e.task(o,i.tasks,function(){var p=t.filter("package.json",{restore:!0});return e.src(i.src).pipe(t.debug({title:o})).pipe(t.bump(i.bump)).pipe(e.dest(i.dest)).pipe(p).pipe(t.shrinkwrap()).pipe(p.restore).pipe(e.dest(i.dest)).pipe(t.debug({title:"git:"})).pipe(t.git.commit(i.bump.type)).pipe(p).pipe(t.tagVersion())}),{npm:function(){e.task(s,function(){t.git.push(i.git.remote.name,i.git.branch,i.git.options)}),e.task(a,[s],function(e){p.spawn("win32"===process.platform?"npm.cmd":"npm",["publish"],{stdio:"inherit"}).on("close",e)}),e.task(r,[o],function(){return e.start([s,a])})}}}};